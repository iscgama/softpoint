const mostrar_error=a=>{$("#error").html('<i class="fas fa-exclamation-triangle"></i> '+a),$("#error").slideDown("slow"),setTimeout(()=>{$("#error").slideUp("slow")},3500)},cancelar_venta=a=>{let t=localStorage.getItem("sucursal");$.ajax({type:"POST",url:"php/cancelando.php",data:"id="+a+"&sucursal="+t,success(a){1==a&&(localStorage.setItem("valor",7),validar(),$("#contenido").load("php/ventas.php"),mensajes("La venta ha sido cancelada"))}})},mensajes=a=>{$("#mensaje").html(a),$("#ventana").modal("toggle")},fecha_actual=()=>{let a=new Date,t=("0"+a.getDate()).slice(-2),o=("0"+(a.getMonth()+1)).slice(-2);return a.getFullYear()+"-"+o+"-"+t},validar=()=>{let a=localStorage.getItem("valor");switch($(".nav-item").removeClass("active"),$(".nav-link").removeClass("active"),a=parseInt(a)){case 0:$("#mvender").addClass("active");break;case 1:$("#mcatalogos").addClass("active");break;case 2:$("#minventario").addClass("active");break;case 3:$("#mseguridad").addClass("active");break;case 4:$("#mresumen").addClass("active");break;case 5:$("#madmon").addClass("active");break;case 6:$("#mstore").addClass("active");break;case 7:$("#mventas").addClass("active");break;case 8:$("#mcontab").addClass("active");break;case 9:$("#mcomprasuc").addClass("active")}},focus_Next=(a,t)=>{13==a.keyCode&&$("#"+t).focus()},cargar_menu=()=>{let a=localStorage.getItem("usuario"),t=localStorage.getItem("tipo"),o=localStorage.getItem("sucursal");a=a.toLowerCase(),document.title="SoftPoint v 1.1 -  User: "+a,""!=a?$.ajax({type:"POST",url:"views/menu.php",data:"usuario="+a+"&tipo="+t+"&sucursal="+o,success(a){$("#barra").html(a),$("#mvender").addClass("active")}}):($("#logo").load("views/logo.html"),$("#contenido").load("views/login.html"))},login_key=({keyCode:a})=>{13==a&&verificar()},verificar=()=>{let a=$("#usuario").val(),t=$("#password").val();""!=a&&""!=t?$.ajax({type:"POST",url:"php/login.php",data:"usuario="+a+"&password="+t,dataType:"json",success(t){if("ok"===t.estado){let o=t.tipo,s=t.sucursal,r=t.idu;localStorage.setItem("tipo",o),localStorage.setItem("sucursal",s),localStorage.setItem("usuario",a),localStorage.setItem("idu",r),cargar_menu(),localStorage.setItem("valor",0),$.post("views/vender.php",{usuario:localStorage.getItem("usuario")},a=>{$("#contenido").html(a)})}else mensajes("Error al iniciar sesion")}}):mensajes("Debes introducir el nombre de usuario y contrase\xf1a para continuar")},userMinus=()=>{let a=$("#usuario").val();$("#usuario").val(a.toLowerCase())},inicializar_vta=()=>{$("#codigov").attr("autocomplete","off"),$("#clientev").val("Cliente de Mostrador"),$("#codigov").focus();let a=localStorage.getItem("idu"),t=localStorage.getItem("sucursal");$.ajax({type:"POST",url:"php/consecvta.php",data:"idu="+a+"&sucursal="+t,success(a){localStorage.setItem("venta",a),detalle_vta()}})},producto_listar=a=>{$("#listabusq").html("");let t=$("#clientev").val();$("#codigov").val(""),$("#descripv").html("Producto"),$.ajax({type:"POST",url:"php/queryprod.php",data:"codigo="+a,dataType:"json",success(a){if("ok"==a.estado){let o=localStorage.getItem("venta"),s=localStorage.getItem("idu"),r=localStorage.getItem("sucursal");$.ajax({type:"POST",url:"php/agregar_reng_vta.php",data:"ida="+a.ida+"&precio="+a.precio+"&venta="+o+"&idu="+s+"&sucursal="+r+"&cliente="+t,success(a){$("#escritos").html(a),detalle_vta(),$("#codigov").focus(),$("#ventana").modal("hide")}})}else $("#escritos").html("El producto no existe")}})},buscar_producto=a=>{let t=$("#"+a).val();""!=t?$.ajax({type:"POST",url:"php/queryprod.php",data:"codigo="+t,dataType:"json",success(t){"error"==t?(mensajes("No se encontro el producto seleccionado, registrelo antes de continuar"),$("#"+a).val(""),$("#"+a).focus()):($("#descripv").html(t.desc),$("#"+a).select(),$("#"+a).focus())}}):mensajes("Debes indicar el codigo de barras de tu producto antes de continuar")},buscar_producto_2=a=>{""!=a?$.ajax({type:"POST",url:"php/queryprod.php",data:"codigo="+a,dataType:"json",success(a){"error"==a?(mensajes("No se encontro el producto seleccionado, registrelo antes de continuar"),$("#articulo").val(""),$("#articulo").focus()):($("#articulo").val(a.cod),$("#descrip").html(a.desc),$("#price").val(a.costo),$("#count").val("1"),$("#count").select(),$("#count").focus())}}):mensajes("Debes indicar el codigo de barras de tu producto antes de continuar")},seleccionar_cod=(a,t)=>{$("#ventana").modal("hide"),$("#"+t).val(a);"ventas"==localStorage.getItem("pantalla")?buscar_producto(t):buscar_producto_2(a)},eliminar_ren_v=a=>{let t=localStorage.getItem("idu"),o=localStorage.getItem("venta");$.ajax({type:"POST",url:"php/del_reng_vta.php",data:"id="+a+"&idu="+t+"&venta="+o,success(a){1==a?detalle_vta():mensajes(a)}})},cambiar_cantidad=(a,t)=>{let o=localStorage.getItem("venta"),s=$("#clientev").val();$.ajax({type:"POST",url:"php/cantventa.php",data:"renglon="+a+"&modo="+t+"&venta="+o+"&cliente="+s,success(a){$("#escritos").html(a),detalle_vta()}})},detalle_vta=()=>{let a=localStorage.getItem("venta");$.ajax({type:"POST",url:"php/detallevta.php",data:"venta="+a,dataType:"json",success(a){$("#prodlist").html(a.detalle),$("#unidades").val(a.unidades),$("#totalv").val(a.total),$(".tablas").DataTable({paging:!1}),screen.height>768&&$("#prodlist").attr("height",450)}})},cantidades_venta_granel=a=>{$.ajax({type:"POST",url:"views/componentesvta/cantventareng.php",data:"&id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},cobrar_boton=()=>{let a=localStorage.getItem("venta");$.ajax({type:"POST",url:"views/componentesvta/cobro.php",data:"venta="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},opciones_boton=()=>{$("#mensaje").load("views/opciones.html"),$("#ventana").modal("toggle")},verifica_cliente=()=>{""==$("#clientev").val()&&$("#clientev").val("Cliente de Mostrador")},valida_cliente=()=>{$("#clientev").val("")},muestra_lista_prods=()=>{let a=$("#codigov").val(),t=localStorage.getItem("sucursal");localStorage.setItem("ventana",1),$.ajax({type:"POST",url:"php/searchprodv.php",data:"codigo="+a+"&sucursal="+t,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},introducir_codigo=({keyCode:a})=>{let t=localStorage.getItem("venta");if(13==a&&producto_listar($("#codigov").val()),43==a){let o=1;e.preventDefault(),$.ajax({type:"POST",url:"php/cantultima.php",data:"modo="+o+"&venta="+t,success(){detalle_vta()}})}if(45==a){let s=0;e.preventDefault(),$.ajax({type:"POST",url:"php/cantultima.php",data:"modo="+s+"&venta="+t,success:function(a){detalle_vta()}})}if(46==a){let r=localStorage.getItem("venta");$.ajax({type:"POST",url:"php/quitar_ultimo_vta.php",data:"venta="+r,success(a){1==a&&detalle_vta()}})}40==a&&muestra_lista_prods()},permisos_user=a=>{$.ajax({type:"POST",url:"views/permisos.php",data:"usuario="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},editar_user=a=>{$.ajax({type:"POST",url:"php/edituser.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},eliminar_user=a=>{$.ajax({type:"POST",url:"php/deluser.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/usuarios.html"))}})},inicializar_user=()=>{$("#listusers").html('<div class="spinner-grow text-primary" role="status"><span class="sr-only">Loading...</span></div>'),$("#listusers").load("php/users.php")},nuevo_usuario=()=>{$("#mensaje").load("views/newuser.php"),$("#ventana").modal("toggle")},imprimir_formato=(a,t)=>{let o="id="+a;$.get("tickets/ticket"+t+".php",o,()=>{window.open("tickets/ticket"+t+".php?id="+a)})},aplicar_abono=()=>{let a=$("#formapago").val(),t=$("#monto").val(),o=localStorage.getItem("montoabono"),s=localStorage.getItem("cobranzaid"),r=localStorage.getItem("idu"),l=$("#cobcte").val();""!=t?t>=o?$.ajax({type:"POST",url:"php/aplicarabono.php",data:"forma="+a+"&monto="+t+"&adeudo="+o+"&id="+s+"&cliente="+l+"&idu="+r,success(a){imprimir_formato(a,"abono"),$("#contenido").load("views/cobranza.php"),$("#ventana").modal("toggle")}}):mostrar_error("El pago no puede ser mayor a lo adeudado"):mostrar_error("Debes introducir un monto valido")},eliminar_prod=a=>{$.ajax({type:"POST",url:"php/delprod.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/productos.html"))}})},editar_prod=a=>{localStorage.setItem("codprod",a),$("#contenido").html('<div class="spinner-grow text-primary" role="status"><span class="sr-only">Loading...</span></div>'),$.ajax({type:"POST",url:"views/newprod.php",success(a){$("#contenido").html(a)}})},agregar_codigo=a=>{$.ajax({type:"POST",url:"php/codigos.php",data:"id="+a,success(a){$("#contenido").html(a)}})},nuevo_producto=()=>{localStorage.setItem("codprod",""),$("#contenido").html('<div class="spinner-grow text-primary" role="status"><span class="sr-only">Loading...</span></div>'),$("#contenido").load("views/newprod.php")},registrar_producto=()=>{let a=$("#clasif").val(),t=$("#marca").val(),o=$("#codigo").val(),s=$("#desc").val();s=s.toUpperCase();let r=$("#costo").val(),l=$("#precio").val(),c=$("#existencia").val(),i=$("#may1").val(),d=$("#cant1").val(),n=$("#may2").val(),p=$("#cant2").val(),m=$("#may3").val(),u=$("#cant3").val(),v=$("#smin").val(),h=$("#smax").val(),g=$("#granel").is(":checked")?1:0,j=$("#inventario").is(":checked")?1:0,b=$("#favorito").is(":checked")?1:0,y=localStorage.getItem("idu");s=s.toUpperCase();let x=localStorage.getItem("operacion"),f=localStorage.getItem("var1"),S=$("#newclasif").val(),T=$("#newmarca").val();""!=o&&""!=s&&""!=l?$.ajax({type:"POST",url:"php/newprod.php",data:"operacion="+x+"&idu="+y+"&codigo="+o+"&desc="+s+"&costo="+r+"&precio="+l+"&existencia="+c+"&clasif="+a+"&marca="+t+"&may1="+i+"&cant1="+d+"&may2="+n+"&cant2="+p+"&may3="+m+"&cant3="+u+"&smin="+v+"&smax="+h+"&granel="+g+"&inventario="+j+"&ida="+f+"&nclasif="+S+"&nmarca="+T+"&favorito="+b,success(a){0!=a?(localStorage.setItem("codprod",""),$("#contenido").html('<div class="spinner-grow text-primary" role="status"><span class="sr-only">Loading...</span></div>'),$.ajax({url:"views/newprod.php",success(a){$("#contenido").html(a),mostrar_error("Producto registrado con \xe9xito: "+s),localStorage.setItem("operacion",0),localStorage.setItem("var1",0)}})):mostrar_error(a)}}):mostrar_error("Debes llenar los siguientes campos para continuar: c\xf3digo, descripci\xf3n y precio de venta")},buscar_producto_registro=()=>{let a=$("#codigo").val();""!=a?($("#desc").focus(),$.ajax({type:"POST",url:"php/queryprod.php",data:"codigo="+a,dataType:"json",success(a){"ok"===a.estado?(localStorage.setItem("operacion",1),localStorage.setItem("var1",a.ida),$("#codigo").val(a.cod),$("#desc").val(a.desc),$("#costo").val(a.costo),$("#precio").val(a.precio),$("#existencia").val(a.existencia),$("#clasif").val(a.clasif),$("#marca").val(a.marca),$("#may1").val(a.may1),$("#cant1").val(a.cant1),$("#may2").val(a.may2),$("#cant2").val(a.cant2),$("#may3").val(a.may3),$("#cant3").val(a.cant3),$("#smin").val(a.smin),$("#smax").val(a.smax),$("#granel").prop("checked",a.granel),$("#inventario").val(a.inventario),$("#favorito").prop("checked",a.favorito)):(localStorage.setItem("var1",0),localStorage.setItem("operacion",0),$("#desc").val(""),$("#costo").val("0"),$("#precio").val("0"),$("#existencia").val("0"),$("#may1").val("0"),$("#cant1").val("0"),$("#may2").val("0"),$("#cant2").val("0"),$("#may3").val("0"),$("#cant3").val("0"),$("#smin").val("0"),$("#smax").val("0"),$("#granel").val(""),$("#inventario").val(""))}})):(mostrar_error("Debes introducir un codigo de barras v\xe1lido"),$("#codigo").focus()),$("#desc").focus()},busqueda_prods=({keyCode:a})=>{13==a&&buscar_producto_registro()},finalizar_venta=()=>{let a=$("#montov").val(),t=$("#forma").val(),o=$("#pagov").val(),s=$("#cambiov").val(),r=localStorage.getItem("venta"),l=localStorage.getItem("sucursal"),c=localStorage.getItem("idu"),i=$("#clientev").val();"Efectivo"==t||"Tarjeta"==t?s>=0?$.ajax({type:"POST",url:"php/finalizar_vta.php",data:"forma="+t+"&cambio="+s+"&pago="+o+"&venta="+r+"&sucursal="+l+"&idu="+c+"&cliente="+i,success(a){1==a?(imprimir_formato(r,""),$.post("views/vender.php",{usuario:localStorage.getItem("usuario")},function(a){$("#contenido").html(a)}),$("#ventana").modal("toggle")):mostrar_error(a)}}):(mostrar_error("Indique una cantidad suficiente para pagar"),$("#pagov").select(),$("#pagov").focus()):"Cliente de Mostrador"!=i?a>o?$.ajax({type:"POST",url:"php/finalizar_vta.php",data:"forma="+t+"&cambio="+s+"&pago="+o+" &venta="+r+"&sucursal="+l+"&idu="+c+"&cliente="+i,success(a){1==a?(imprimir_formato(r,""),$("#contenido").load("views/vender.php"),$("#ventana").modal("toggle")):mostrar_error(a)}}):mostrar_error("No hay cantidad para pagar a cr\xe9dito"):mostrar_error("Debe seleccionar un cliente para vender a cr\xe9dito")},calcular_pago_vta=()=>{let a=$("#pagov").val();if(""!=a&&!isNaN(a)){let t=$("#montov").val(),o=parseFloat(a)-parseFloat(t);$("#cambiov").val(o)}},cobrar_enter=a=>{13==a.keyCode&&(a.preventDefault(),finalizar_venta())},forma_credito=()=>{"Credito"==$("#forma").val()&&($("#pagov").val("0"),calcular_pago_vta())},eliminar_compra=a=>{let t=localStorage.getItem("sucursal"),o=localStorage.getItem("idu");$.ajax({type:"POST",url:"php/eliminarcompra.php",data:"id="+a+"&sucursal="+t+"&idu="+o,success(a){1==a?(mensajes("El movimiento fue cancelado y el inventario ha cambiado"),$("#contenido").load("views/compras.html")):mensajes(a)}})},finalizar_compra=a=>{var t=localStorage.getItem("sucursal"),o=localStorage.getItem("idu");$.ajax({type:"POST",url:"php/finalizarcompra.php",data:"id="+a+"&sucursal="+t+"&usuario="+o,success(t){1==t?(mensajes("Compra realizada con \xe9xito"),imprimir_formato(a,"compra"),$("#contenido").load("views/compras.html")):mostrar_error(t)}})},nueva_compra=()=>{$("#contenido").load("views/newcompra.php")},eliminar_reng_com=a=>{$.ajax({type:"POST",url:"php/eliminar_reng_com.php",data:"id="+a,success(a){0!=a&&detalle_compra()}})},agregar_renglon=()=>{let a=$("#articulo").val(),t=$("#count").val(),o=$("#price").val(),s=$("#compra").val(),r=localStorage.getItem("idu"),l=$("#proveedores").val();$("#proveedores").attr("disabled","true"),""==a||isNaN(t)||isNaN(o)?mensajes("Datos no v\xe1lidos, debes introducir el c\xf3digo del producto, cantidad y precio"):$.ajax({type:"POST",url:"php/agrega_reng_comp.php",data:"code="+a+"&count="+t+"&price="+o+"&compra="+s+"&idu="+r+"&prov="+l,success:function(a){0==a?detalle_compra():mensajes(a)}})},cambiarcant=(a,t)=>{localStorage.setItem("cantidad",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_cantidades.html"),$("#ventana").modal("toggle")},cambiarprecio=(a,t)=>{localStorage.setItem("precio",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_precios.html"),$("#ventana").modal("toggle")},obtener_consec_compra=()=>{$.ajax({type:"POST",url:"php/obtener_consec.php",success(a){$("#compra").val(a),localStorage.setItem("numcompra",a),detalle_compra()}})},detalle_compra=()=>{let a=$("#compra").val();$.ajax({type:"POST",url:"php/detallecompra.php",data:"num="+a,success(a){$("#descrip").html("Descripci\xf3n"),$("#articulo").val(""),$("#count").val(""),$("#price").val(""),$("#detallecompra").html(a),$("#articulo").focus()}})},pasar_cantidad=a=>{let t=$("#articulo").val();13==a.keyCode&&""!=t&&(""!=$("#count").val()?(a.preventDefault(),agregar_renglon_compra(),$("#ttcompra").removeAttr("disabled")):mensajes("Debes colocar una cantidad valida"))},eliminar_clasifica=a=>{$.ajax({type:"POST",url:"php/delclasifica.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/clasificaciones.html"))}})},editar_clasif=a=>{$.ajax({type:"POST",url:"php/modclasif.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},botono_nueva_clasificacion=()=>{$("#mensaje").load("views/newclasifica.html"),$("#ventana").modal("toggle")},eliminar_cajero=a=>{$.ajax({type:"POST",url:"php/delcajeros.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/cajeros.html"))}})},editar_cj=a=>{$.ajax({type:"POST",url:"views/newcajero.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},boton_nuevocajero=()=>{$("#mensaje").load("views/newcajero.php"),$("#ventana").modal("toggle")},mostrar_lista=()=>{$.ajax({type:"POST",url:"php/listadocaja.php",success(a){$("#listacaja").html(a)}})},cancelar_movimiento=a=>{$.ajax({type:"POST",url:"php/eliminar_mov.php",data:"id="+a,success(){mensajes("Se dio de baja correctamente el movimiento"),mostrar_lista()}})},boton_nuevoingreso=()=>{$("#mensaje").load("views/registro_ingreso.html"),$("#ventana").modal("toggle")},boton_nuevoegreso=()=>{$("#mensaje").load("views/registro_egreso.html"),$("#ventana").modal("toggle")},guardar_egresos=a=>{let t=$("#fecha").val(),o=$("#concepto").val(),s=$("#monto").val();""!=o&&""!=s?$.ajax({type:"POST",url:"php/registro.php",data:"usuario="+id+"&fecha="+t+"&concepto="+o+"&monto="+s+"&tipo="+a+"&concepto="+o,success(a){$("#mensaje").html(a),$("#contenido").load("views/egresos.html")}}):mostrar_error("Debes introducir el concepto y el monto")},guardar_movimiento=a=>{let t=$("#concepto").val(),o=$("#monto").val(),s=$("#fecha").val();$.ajax({type:"POST",url:"php/guardar_movimiento.php",data:"concepto="+t+"&monto="+o+"&fecha="+s+"&tipo="+a,success:function(a){1==a?($("#mensaje").html("Se ha registrado con \xe9xito"),$("#contenido").load("views/contable.html")):mostrar_error(a)}})},eliminar_entrada=a=>{let t=localStorage.getItem("sucursal");$.ajax({type:"POST",url:"php/eliminarentrada.php",data:"id="+a+"&sucursal="+t,success(a){1==a?(mensajes("El movimiento fue cancelado y el inventario ha cambiado"),$("#contenido").load("views/entradas.html")):mensajes(a)}})},finalizar_entrada=a=>{let t=localStorage.getItem("sucursal");$.ajax({type:"POST",url:"php/finalizarentrada.php",data:"id="+a+"&sucursal="+t,success(t){1==t?(mensajes("Entrada realizada con \xe9xito"),imprimir_formato(a,"entrada"),$("#contenido").load("views/entradas.html")):mostrar_error(t)}})},eliminar_salida=a=>{let t=localStorage.getItem("sucursal");$.ajax({type:"POST",url:"php/eliminarsalida.php",data:"id="+a+"&sucursal="+t,success(a){1==a?(mensajes("El movimiento fue cancelado y el inventario ha cambiado"),$("#contenido").load("views/salidas.html")):mensajes(a)}})},finalizar_salida=a=>{let t=localStorage.getItem("sucursal");$.ajax({type:"POST",url:"php/finalizarsalida.php",data:"id="+a+"&sucursal="+t,success(t){1==t?(mensajes("Entrada realizada con \xe9xito"),imprimir_formato(a,"salida"),$("#contenido").load("views/salidas.html")):mostrar_error(t)}})},editar_recibo=a=>{$.ajax({type:"POST",url:"php/modrecibo.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},eliminar_recibo=a=>{$.ajax({type:"POST",url:"php/delrecibo.php",data:"id="+a,success(a){1==a?(mensajes("Se dio de baja el recibo con \xe9xito"),$("#contenido").load("php/recibos.php")):mensaje(a)}})},modificar_recibo=a=>{let t=$("#nombre").val(),o=$("#concepto").val(),s=$("#monto").val();$.ajax({type:"POST",url:"php/modificar_recibo.php",data:"nombre="+t+"&concepto="+o+"&monto="+s+"&id="+a,success(t){1==t?(imprimir_recibo(a),$("#mensaje").html("Se ha modificado con \xe9xito"),$("#contenido").load("php/recibos.php")):mostrar_error(t)}})},reimprimir_ticket=()=>{let a=$("#ticketvta").val();imprimir_formato(a,""),$("#ventana").modal("hide")},abonar_cuenta=(a,t,o)=>{localStorage.setItem("cobranzaid",a),$.ajax({type:"POST",url:"php/abono.php",data:"cliente="+t+"&saldo="+o,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},realizar_consulta=()=>{let a=$("#cobcte").val();""!=a?$.ajax({type:"POST",url:"php/cobranzaquery.php",data:"cliente="+a,success(a){$("#listacobranza").html(a)}}):mostrar_error("Debes seleccionar un cliente para consultar sus datos")},realizar_consulta_global=()=>{let a=$("#cobcte").val();""!=a?$.ajax({type:"POST",url:"php/cobranzaqueryg.php",data:"cliente="+a,success(a){$("#listacobranza").html(a)}}):mostrar_error("Debes seleccionar un cliente para consultar sus datos")},eliminar_marca=a=>{$.ajax({type:"POST",url:"php/delmarcas.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/marcas.html"))}})},editar_marca=a=>{$.ajax({type:"POST",url:"php/modmarca.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},eliminar_codigo=a=>{$.ajax({type:"POST",url:"php/delcodigo.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/productos.html"))}})},save_code=()=>{let a=$("#codigon").val(),t=$("#ida").html(),o=localStorage.getItem("idu");""!=a?$.ajax({type:"POST",url:"php/regcodigo.php",data:"codigo="+a+"&idu="+o+"&ida="+t,success:function(a){1==a?(mensajes("Se actualizo el c\xf3digo de barras nuevo"),$("#contenido").load("views/productos.html")):mostrar_error(a)}}):mostrar_error("Debes introducir un c\xf3digo para actualizar el anterior")},eliminar_suc=a=>{$.ajax({type:"POST",url:"php/delsuc.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/sucursales.html"))}})},editar_suc=a=>{$.ajax({type:"POST",url:"views/modsuc.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},eliminar_cte=a=>{$.ajax({type:"POST",url:"php/delcte.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/clientes.html"))}})},editar_cte=a=>{$.ajax({type:"POST",url:"views/newcte.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},eliminar_traspaso=a=>{$.ajax({type:"POST",url:"php/traspasos/eliminartraspaso.php",data:"id="+a,success(){mensajes("Se ha eliminado el traspaso con \xe9xito"),$("#contenido").load("views/traspasos.html")}})},editar_traspaso=a=>{localStorage.setItem("numtras",a),$("#contenido").load("views/newtraspaso.php")},aplicar_traspaso=a=>{let t=localStorage.getItem("idu");$.ajax({type:"POST",url:"php/traspasos/aplicartraspaso.php",data:"id="+a+"&idu="+t,success(a){1==a?(mensajes("Se ha aplicado con \xe9xito el traspaso a la sucursal"),$("#contenido").load("views/traspasos.html")):mensajes(a)}})},eliminar_rol=a=>{$.ajax({type:"POST",url:"php/delrol.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/roles.html"))}})},eliminar_pr=a=>{$.ajax({type:"POST",url:"php/delpr.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/proveedores.html"))}})},editar_pr=a=>{$.ajax({type:"POST",url:"views/newpr.php",data:"id="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},guardar_empresa=()=>{let a=$("#nombre").val(),t=$("#dir").val(),o=$("#tel").val(),s=$("#codigo").val(),r=$("#ciudadr").val(),l=$("#estador").val();$.ajax({type:"POST",url:"php/regemp.php",data:"nombre="+a+"&dir="+t+"&tel="+o+"&codigo="+s+"&ciudadr="+r+"&estador="+l,success(){mensajes("Se ha guardado con \xe9xito la informaci\xf3n")}})},reporte=()=>{var a=$("#socio").val();""==a?mensajes("Debes seleccionar al menos un socio para generar su reporte"):($("#resultado").html('<div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>'),$.ajax({type:"POST",url:"php/ingvsegre.php",data:"socio="+a,success(){$("#resultado").html(res)}}))},retirar_dinero=()=>{let a=$("#concepto").val(),t=$("#monto").val(),o=localStorage.getItem("idu"),s=localStorage.getItem("sucursal");""!=a&&""!=t?$.ajax({type:"POST",url:"php/retirar.php",data:"concepto="+a+"&monto="+t+"&idu="+o+"&sucursal="+s+"&tipo=E",success(a){imprimir_formato(a,"retiro"),$("#mensaje").html("Se ha realizado con exito el retiro")}}):mostrar_error("Debes introducir el concepto y el monto del retiro antes de continuar")},save_rol=()=>{let a=$("#desc").val(),t=$("#productos").is(":checked")?1:0,o=$("#clasif").is(":checked")?1:0,s=$("#marcas").is(":checked")?1:0,r=$("#clientes").is(":checked")?1:0,l=$("#pr").is(":checked")?1:0,c=$("#sucursales").is(":checked")?1:0,i=$("#cajas").is(":checked")?1:0,d=$("#entradas").is(":checked")?1:0,n=$("#salidas").is(":checked")?1:0,p=$("#compras").is(":checked")?1:0,m=$("#pedidos").is(":checked")?1:0,u=$("#traspasos").is(":checked")?1:0,v=$("#usuarios").is(":checked")?1:0,h=$("#roles").is(":checked")?1:0,g=$("#cajeros").is(":checked")?1:0,j=$("#permisos").is(":checked")?1:0,b=$("#datos").is(":checked")?1:0,y=$("#cobranza").is(":checked")?1:0,x=1,f=0;""!=a?$.ajax({type:"POST",url:"php/regrol.php",data:"productos="+t+"&clasif="+o+"&marcas="+s+"&clientes="+r+"&pr="+l+"&sucursales="+c+"&cajas="+i+"&entradas="+d+"&salidas="+n+"&compras="+p+"&pedidos="+m+"&traspasos="+u+"&usuarios="+v+"&roles="+h+"&cajeros="+g+"&permisos="+j+"&datos="+b+"&operacion="+f+"&desc="+a+"&cobranza="+y+"&vender="+x,success:function(a){1==a?($("#mensaje").html("Se ha registrado con \xe9xito"),$("#contenido").load("views/roles.html")):mostrar_error(a)}}):(mostrar_error("Debes indicar al menos el nombre del rol para continuar"),$("#desc").focus())},selected_controls=()=>{let a=0==localStorage.getItem("seleccion");$("#productos").attr("checked",a),$("#clasif").attr("checked",a),$("#marcas").attr("checked",a),$("#clientes").attr("checked",a),$("#pr").attr("checked",a),$("#sucursales").attr("checked",a),$("#cajas").attr("checked",a),$("#entradas").attr("checked",a),$("#salidas").attr("checked",a),$("#compras").attr("checked",a),$("#pedidos").attr("checked",a),$("#traspasos").attr("checked",a),$("#usuarios").attr("checked",a),$("#roles").attr("checked",a),$("#cajeros").attr("checked",a),$("#permisos").attr("checked",a),$("#datos").attr("checked",a),$("#cobranza").attr("checked",a),a=a?1:0,localStorage.setItem("seleccion",a)},guardar_datos_pr=(a,t)=>{let o=$("#razon").val(),s=$("#nombre").val(),r=$("#direccion").val(),l=$("#colonia").val(),c=$("#telefono").val(),i=$("#poblacion").val(),d=$("#estado").val(),n=$("#saldo").val(),p=localStorage.getItem("idu");n=""!=n?0:n,""!=o&&""!=s?$.ajax({type:"POST",url:"php/regpr.php",data:"idu="+p+"&razon="+o+"&nombre="+s+"&direccion="+r+"&colonia="+l+"&telefono="+c+"&poblacion="+i+"&estado="+d+"&saldo="+n+"&operacion="+t+"&anterior="+a,success(a){1==a?($("#mensaje").html("Se ha registrado con exito"),$("#contenido").load("views/proveedores.html")):mostrar_error(a)}}):(mostrar_error("Debes capturar al menos el nombre y la razon social"),$("#razon").focus())},editar_prov=a=>{guardar_datos_pr(a,1)},save_user=()=>{let a=$("#nombre").val(),t=$("#usuario").val(),o=$("#pass").val(),s=$("#roles").val(),r=$("#sucursales").val(),l=0;""!=a&&""!=t&&""!=o&&""!=s&&""!=r?$.ajax({type:"POST",url:"php/reguser.php",data:"nombre="+a+"&usuario="+t+"&pass="+o+"&roles="+s+"&sucursales="+r+"&operacion="+l,success(a){1==a?($("#mensaje").html("Se ha registrado con \xe9xito"),$("#contenido").load("views/usuarios.html")):mostrar_error(a)}}):mostrar_error("Debes llenar todo el formulario completo para registrar a un usuario")},save_trademark=()=>{let a=$("#desc").val(),t=localStorage.getItem("idu");""!=a?$.ajax({type:"POST",url:"php/regmarca.php",data:"&idu="+t+"&desc="+a,success(a){1==a?($("#mensaje").html("Se ha registrado con exito"),$("#contenido").load("views/marcas.html")):mostrar_error(a)}}):mostrar_error("Debes introducir un nombre valido")},eliminar_ce=a=>{$.ajax({type:"POST",url:"php/delce.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/centrada.html"))}})},eliminar_cs=a=>{$.ajax({type:"POST",url:"php/delcs.php",data:"id="+a,success(a){0!=a&&(mensajes("El elemento se ha dado de baja correctamente"),$("#contenido").load("views/csalida.html"))}})},checar_cantidades=()=>{$("#b1000").val(""==$("#b1000").val()?0:$("#b1000").val()),$("#b500").val(""==$("#b500").val()?0:$("#b500").val()),$("#b200").val(""==$("#b200").val()?0:$("#b200").val()),$("#b100").val(""==$("#b100").val()?0:$("#b200").val()),$("#b50").val(""==$("#b50").val()?0:$("#b200").val()),$("#b20").val(""==$("#b20").val()?0:$("#b200").val()),$("#m10").val(""==$("#m10").val()?0:$("#m10").val()),$("#m5").val(""==$("#m5").val()?0:$("#m5").val()),$("#m2").val(""==$("#m2").val()?0:$("#m2").val()),$("#m1").val(""==$("#m1").val()?0:$("#m1").val()),$("#m05").val(""==$("#m05").val()?0:$("#m05").val())},cantidades=()=>{let a=0,t=$("#b1000").val();t=parseInt(t),a+=1e3*t,t=$("#b500").val(),t=parseInt(t),a+=500*t,t=$("#b200").val(),t=parseInt(t),a+=200*t,t=$("#b100").val(),t=parseInt(t),a+=100*t,t=$("#b50").val(),t=parseInt(t),a+=50*t,t=$("#b20").val(),t=parseInt(t),a+=20*t,t=$("#m20").val(),t=parseInt(t),a+=20*t,t=$("#m10").val(),t=parseInt(t),a+=10*t,t=$("#m5").val(),t=parseInt(t),a+=5*t,t=$("#m2").val(),t=parseInt(t),a+=2*t,t=$("#m1").val(),t=parseInt(t),a+=1*t,t=$("#m05").val(),t=parseInt(t),a+=.5*t,localStorage.setItem("totalarq",a);let o=new Intl.NumberFormat("en-US",{style:"currency",currency:"MXN"});a=o.format(a),$("#subtotal").val(a)},enviarcorte=()=>{let a=new Promise((a,t)=>{var o;let s=localStorage.getItem("sucursal"),r=localStorage.getItem("usuario"),l=localStorage.getItem("totalarq"),c="sucursal="+s+"&usuario="+r+"&contado="+l;return $.get("tickets/ticketcorte.php",c,()=>{(o=window.open("tickets/ticketcorte.php?sucursal="+s+"&usuario="+r+"&contado="+l)).addEventListener("load",()=>{a()})}),Promise});a.then(()=>{let a=localStorage.getItem("sucursal"),t=localStorage.getItem("usuario"),o=localStorage.getItem("totalarq");$.ajax({type:"POST",url:"php/cerrar_corte.php",data:"sucursal="+a+"&usuario="+t+"&dinero="+o,success(){}}),$("#mensaje").html('<h1 class="title">Corte realizado con \xe9xito</h1>')})},validar_tecla_compra=({keyCode:a})=>{let t=$("#articulo").val();switch(a){case 13:buscar_producto_2(t);break;case 40:busq_prod()}},busq_prod=()=>{let a=$("#articulo").val();$.ajax({type:"POST",url:"php/searchprods.php",data:"criterio="+a,success(a){$("#mensaje").html(a),$("#ventana").modal("toggle")}})},agregar_renglon_compra=()=>{let a=$("#articulo").val(),t=$("#count").val(),o=$("#price").val(),s=$("#compra").val(),r=localStorage.getItem("idu"),l=$("#proveedores").val();$("#proveedores").attr("disabled","true"),""==a||isNaN(t)||isNaN(o)?mensajes("Datos no v\xe1lidos, debes introducir el c\xf3digo del producto, cantidad y precio"):$.ajax({type:"POST",url:"php/agrega_reng_comp.php",data:"code="+a+"&count="+t+"&price="+o+"&compra="+s+"&idu="+r+"&prov="+l,success(a){0==a?detalle_compra():mensajes(a)}})},eliminar_reng_ent=a=>{$.ajax({type:"POST",url:"php/eliminar_reng_ent.php",data:"id="+a,success(a){0!=a&&detalle_entrada()}})},agregar_renglon_entrada=()=>{$("#ttentrada").removeAttr("disabled");let a=$("#articulo").val(),t=$("#count").val(),o=$("#price").val(),s=$("#entrada").val(),r=localStorage.getItem("idu"),l=$("#conceptos").val();$("#conceptos").attr("disabled","true"),""==a||isNaN(t)||isNaN(o)?mensajes("Datos no v\xe1lidos, debes introducir el c\xf3digo del producto, cantidad y precio"):$.ajax({type:"POST",url:"php/agrega_reng_ent.php",data:"code="+a+"&count="+t+"&price="+o+"&compra="+s+"&idu="+r+"&concepto="+l,success(a){0==a?($("#descrip").html("Descripci\xf3n"),$("#articulo").val(""),$("#count").val(""),$("#price").val(""),$("#articulo").focus(),detalle_entrada()):mensajes(a)}})},obtener_consec_entrada=()=>{$.ajax({type:"POST",url:"php/obtener_consec_entrada.php",success:function(a){$("#entrada").val(a),localStorage.setItem("numentrada",a),detalle_entrada(a)}}),$("#articulo").focus()},detalle_entrada=()=>{let a=$("#entrada").val();$.ajax({type:"POST",url:"php/detalleentrada.php",data:"num="+a,success(a){$("#detalleentrada").html(a)}})},cambiarcant_ent=(a,t)=>{localStorage.setItem("cantidad",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_cantent.html"),$("#ventana").modal("toggle")},cambiarprecio_ent=(a,t)=>{localStorage.setItem("precio",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_pentrada.html"),$("#ventana").modal("toggle")},eliminar_reng_sal=a=>{$.ajax({type:"POST",url:"php/eliminar_reng_sal.php",data:"id="+a,success(a){0!=a&&detalle_salida()}})},agregar_renglon_sal=()=>{let a=$("#articulo").val(),t=$("#count").val(),o=$("#price").val(),s=$("#salida").val(),r=localStorage.getItem("idu"),l=$("#conceptos").val();$("#conceptos").attr("disabled","true"),""==a||isNaN(t)||isNaN(o)?mensajes("Datos no v\xe1lidos, debes introducir el c\xf3digo del producto, cantidad y precio"):$.ajax({type:"POST",url:"php/agrega_reng_sal.php",data:"code="+a+"&count="+t+"&price="+o+"&compra="+s+"&idu="+r+"&concepto="+l,success(a){0==a?($("#descrip").html("Descripci\xf3n"),$("#articulo").val(""),$("#count").val(""),$("#price").val(""),$("#articulo").focus(),detalle_salida()):mensajes(a)}})},detalle_salida=()=>{let a=$("#salida").val();$.ajax({type:"POST",url:"php/detallesalida.php",data:"num="+a,success(a){$("#detallesalida").html(a)}})},obtener_consec=()=>{$.ajax({type:"POST",url:"php/obtener_consec_salida.php",success(a){$("#salida").val(a),localStorage.setItem("numsalida",a),detalle_salida(a)}}),$("#articulo").focus()},cambiarcant_sal=(a,t)=>{localStorage.setItem("cantidad",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_cantsal.html"),$("#ventana").modal("toggle")},cambiarprecio_sal=(a,t)=>{localStorage.setItem("precio",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_psalida.html"),$("#ventana").modal("toggle")},eliminar_pedido=a=>{$.ajax({type:"POST",url:"php/eliminarpedido.php",data:"id="+a,success(a){1==a?(mensajes("Se desecho el pedido"),$("#contenido").load("views/pedidos.html")):mensajes(a)}})},finalizar_pedido=a=>{$.ajax({type:"POST",url:"php/finalizarpedido.php",data:"id="+a,success(t){console.log(t),1==t?(mensajes("Pedido guardado con \xe9xito"),imprimir_formato(a,"pedido"),$("#contenido").load("views/pedidos.html")):mostrar_error(t)}})},eliminar_reng_ped=a=>{$.ajax({type:"POST",url:"php/eliminar_reng_ped.php",data:"id="+a,success(a){0!=a&&detalle_pedido()}})},agregar_renglon_pedido=()=>{let a=$("#articulo").val(),t=$("#count").val(),o=$("#price").val(),s=$("#pedido").val(),r=localStorage.getItem("idu"),l=$("#proveedores").val();$("#proveedores").attr("disabled","true"),""==a||isNaN(t)||isNaN(o)?mensajes("Datos no v\xe1lidos, debes introducir el c\xf3digo del producto, cantidad y precio"):$.ajax({type:"POST",url:"php/agrega_reng_ped.php",data:"code="+a+"&count="+t+"&price="+o+"&compra="+s+"&idu="+r+"&pr="+l,success(a){0==a?($("#descrip").html("Descripci\xf3n"),$("#articulo").val(""),$("#count").val(""),$("#price").val(""),$("#articulo").focus(),detalle_pedido()):mensajes(a)}})},cambiarcant_pedido=(a,t)=>{localStorage.setItem("cantidad",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_cantped.html"),$("#ventana").modal("toggle")},cambiarprecio_pedido=(a,t)=>{localStorage.setItem("precio",t),localStorage.setItem("renglon",a),$("#mensaje").load("views/cambiar_ppedido.html"),$("#ventana").modal("toggle")},obtener_consec_pedido=()=>{$.ajax({type:"POST",url:"php/obtener_consec_pedido.php",success(a){$("#pedido").val(a),localStorage.setItem("numpedido",a),detalle_pedido(a)}}),$("#articulo").focus()},detalle_pedido=()=>{let a=$("#pedido").val();$.ajax({type:"POST",url:"php/detallepedido.php",data:"num="+a,success(a){$("#detallepedido").html(a)}})},eliminar_traspaso_suc=a=>{$.ajax({type:"POST",url:"php/traspasos/eliminartraspaso.php",data:"id="+a,success(){mensajes("Se ha eliminado el traspaso con \xe9xito"),$("#contenido").load("views/trassuc.html")}})},editar_traspaso_suc=a=>{localStorage.getItem("idu"),localStorage.getItem("sucursal"),localStorage.setItem("numtras",a),$("#contenido").load("views/newtrsuc.php")},aplicar_traspaso_suc=a=>{let t=localStorage.getItem("idu");$.ajax({type:"POST",url:"php/trassuc/aplicartraspaso.php",data:"id="+a+"&idu="+t,success(a){1==a?(mensajes("Se ha aplicado con \xe9xito el traspaso a la sucursal"),$("#contenido").load("views/trassuc.html")):mensajes(a)}})},guardar_sucursal=(a,t)=>{let o=$("#sucursal").val(),s=$("#direccion").val(),r=$("#telefono").val(),l=$("#cp").val(),c=$("#ciudad").val(),i=$("#estado").val(),d=localStorage.getItem("idu");""!=o&&""!=s?$.ajax({type:"POST",url:"php/regsuc.php",data:"sucursal="+o+"&direccion="+s+"&telefono="+r+"&cp="+l+"&ciudad="+c+"&estado="+i+"&operacion="+a+"&idu="+d+"&anterior="+t,success(a){1==a?($("#mensaje").html("Se ha registrado con \xe9xito"),$("#contenido").load("views/sucursales.html")):mostrar_error(a)}}):mostrar_error("Debes llenar los siguientes campos: sucursal, direccion para continuar")},actualizar_cte=a=>{guardar_datos(1,a)},guardar_datos=(a,t)=>{let o=$("#nombre").val(),s=$("#direccion").val(),r=$("#telefono").val(),l=$("#poblacion").val(),c=$("#estado").val(),i=$("#lista").val(),d=$("#clasifica").val(),n=$("#limite").val(),p=localStorage.getItem("idu");""!=o?$.ajax({type:"POST",url:"php/regcte.php",data:"idu="+p+"&nombre="+o+"&direccion="+s+"&telefono="+r+"&poblacion="+l+"&estado="+c+"&lista="+i+"&operacion="+a+"&clasifica="+d+"&limite="+n+"&anterior="+t,success(a){1==a?($("#mensaje").html("Se ha registrado con exito"),$("#contenido").load("views/clientes.html")):mostrar_error(a)}}):mostrar_error("Debes introducir un nombre de cliente antes de continuar")},ingresar_dinero=()=>{let a=$("#concepto").val(),t=$("#monto").val(),o=localStorage.getItem("idu"),s=localStorage.getItem("sucursal");""!=a&&""!=t?$.ajax({type:"POST",url:"php/retirar.php",data:"concepto="+a+"&monto="+t+"&idu="+o+"&sucursal="+s+"&tipo=I",success(a){imprimir_formato(a,"retiro"),$("#mensaje").html("Se ha realizado con exito el ingreso")}}):mostrar_error("Debes introducir el concepto y el monto del ingreso antes de continuar")},reporte_ind=()=>{$("#resultado").html('<div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>');var a=$("#socio").val();""!=a?$.ajax({type:"POST",url:"php/resultados2.php",data:"socio="+a+"&fecha1="+$("#fecha1").val()+"&fecha2="+$("#fecha2").val(),success(a){$("#lindiviual").html(a),$("#formulario").slideUp("slow")}}):mensajes("Debes indicar el nombre del socio")},regresar=()=>{$("#contenido").load("views/individual.html")},eliminar_reng_t=a=>{$.ajax({type:"POST",url:"php/traspasos/eliminar_reng_tras.php",data:"id="+a,success(a){0!=a&&detalle_traspaso()}})},detalle_traspaso=()=>{let a=localStorage.getItem("numtras");$.ajax({type:"POST",url:"php/traspasos/detalletraspasos.php",data:"traspaso="+a,success(a){$("#traspasoslist").html(a)}})},a_traspasos_reng=()=>{let a=$("#codigov").val(),t=$("#cantidades").val(),o=$("#descripv").html(),s=$("#sucursal").html(),r=localStorage.getItem("numtras");""!=a&&""!=o&&""!=t?$.ajax({type:"POST",url:"php/traspasos/agregar_reng.php",data:"producto="+a+"&cantidad="+t+"&sucursal="+s+"&numtras="+r,success(){$("#sucursal").attr("disabled",!0),$("#codigov").val(""),$("#cantidades").val("1"),$("#descripv").html("Prod"),$("#codigov").focus(),detalle_traspaso()}}):mostrar_error("Debes capturar el producto y la cantidad que deseas traspasar")},guardar_traspaso=()=>{let a=localStorage.getItem("numtras"),t=$("#sucursal").val();""!=t?$.ajax({type:"POST",url:"php/traspasos/guardar_traspaso.php",data:"numtras="+a+"&sucursal="+t,success(a){1==a?(mensajes("Se guardo con \xe9xito el traspaso, solo falta confirmarlo"),$("#contenido").load("views/traspasos.html")):mostrar_error(a)}}):mostrar_error("Debes seleccionar la sucursal a la que se aplicar\xe1 el traspaso")},guardar_recibo=()=>{let a=$("#nombre").val(),t=$("#concepto").val(),o=$("#monto").val();""!=a&&""!=t&&""!=o?$.ajax({type:"POST",url:"php/salvar_recibo.php",data:"nombre="+a+"&concepto="+t+"&monto="+o+"&fecha="+fecha_actual(),success(a){0!=a?($("#mensaje").html("Se ha registrado con \xe9xito"),$("#contenido").load("php/recibos.php"),imprimir_formato(a,"recibo")):mostrar_error(a)}}):(mostrar_error("Debes introducir todos los datos antes de continuar"),$("#nombre").focus())};$(document).ready(()=>{localStorage.clear(),$.extend(!0,$.fn.dataTable.defaults,{language:{decimal:",",thousands:".",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoPostFix:"",infoFiltered:"(filtrado de un total de _MAX_ registros)",loadingRecords:"Cargando...",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"},processing:"Procesando...",search:"Buscar:",searchPlaceholder:"T\xe9rmino de b\xfasqueda",zeroRecords:"No se encontraron resultados",emptyTable:"Ning\xfan dato disponible en esta tabla",aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{create:"Nuevo",edit:"Cambiar",remove:"Borrar",copy:"Copiar",csv:"fichero CSV",excel:"tabla Excel",pdf:"documento PDF",print:"Imprimir",colvis:"Visibilidad columnas",collection:"Colecci\xf3n",upload:"Seleccione fichero...."},select:{rows:{_:"%d filas seleccionadas",0:"clic fila para seleccionar",1:"una fila seleccionada"}}},buttons:["copy","excel"]})});